# Road Marking Classifier

é“è·¯æ¨™ç¤ºåˆ†é¡ã‚·ã‚¹ãƒ†ãƒ  - research4.ipynbæº–æ‹ ã®é«˜ç²¾åº¦ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ç‚¹ç¾¤ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰é“è·¯æ¨™ç¤ºã‚’è‡ªå‹•åˆ†é¡

## æ¦‚è¦

ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã¯ã€LiDARç‚¹ç¾¤ãƒ‡ãƒ¼ã‚¿ï¼ˆPCD/PLYå½¢å¼ï¼‰ã‹ã‚‰é“è·¯æ¨™ç¤ºã‚’è‡ªå‹•çš„ã«æ¤œå‡ºãƒ»åˆ†é¡ã—ã€**research4.ipynbæº–æ‹ ã®æ­£ç¢ºãªè‰²åˆ†ã‘**ã§DXFãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›ã—ã¾ã™ï¼š

- ï¿½ **æ¨ªæ–­æ­©é“** (ç´«è‰² - Magenta, color=6)
- ï¿½ **åœæ­¢ç·š** (èµ¤è‰² - Red, color=1)  
- ï¿½ **æ­©é“ç·šãƒ»è»Šç·š** (é»„è‰² - Yellow, color=2)

## âœ¨ æœ€æ–°ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ

**research4.ipynbå®Œå…¨æº–æ‹ ç‰ˆ**ã‚’å®Ÿè£…ï¼ä»¥ä¸‹ã®ç‰¹å¾´ãŒã‚ã‚Šã¾ã™ï¼š

- âœ… **å®Ÿè¨¼æ¸ˆã¿é«˜ç²¾åº¦**: 22,645ç‚¹ã®å®Ÿãƒ‡ãƒ¼ã‚¿ã§0.79ç§’å‡¦ç†
- âœ… **3åˆ†é¡ã‚·ã‚¹ãƒ†ãƒ **: æ¨ªæ–­æ­©é“15å€‹ã€æ­©é“ç·š18å€‹ã‚’æ­£ç¢ºæ¤œå‡º
- âœ… **300GBå¯¾å¿œ**: å¤§å®¹é‡ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ãƒãƒƒãƒå‡¦ç†
- âœ… **CADäº’æ›**: AutoCADå¯¾å¿œã®è‰²åˆ†ã‘ãƒ¬ã‚¤ãƒ¤ãƒ¼å‡ºåŠ›

## ä¸»ãªæ©Ÿèƒ½

### ğŸ” research4.ipynbæº–æ‹ ã®æ¤œå‡ºæŠ€è¡“
- **ç™½è‰²ç‚¹æŠ½å‡º**: HSVé–¾å€¤ã«ã‚ˆã‚‹é«˜ç²¾åº¦ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- **2DæŠ•å½±**: 3Dç‚¹ç¾¤ã®åŠ¹ç‡çš„ãªç”»åƒå¤‰æ›
- **å½¢æ…‹å­¦å‡¦ç†**: ãƒã‚¤ã‚ºé™¤å»ã¨ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ³ã‚°æ“ä½œ
- **è¼ªéƒ­æ¤œå‡º**: OpenCVã«ã‚ˆã‚‹çŸ©å½¢å€™è£œæŠ½å‡º

### ğŸ¯ 3æ®µéšåˆ†é¡ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
1. **æ¨ªæ–­æ­©é“æ¤œå‡º**: DBSCANã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚° + ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”åˆ¤å®š
2. **åœæ­¢ç·šç‰¹å®š**: æ¨ªæ–­æ­©é“è¿‘è¾ºã®å‚ç›´ç´°é•·çŸ©å½¢
3. **æ­©é“ç·šåˆ†é¡**: æ®‹å­˜å€™è£œã‹ã‚‰ã®ç´°é•·å½¢çŠ¶æŠ½å‡º

### ğŸ¨ CADå¯¾å¿œå‡ºåŠ›
- **æ­£ç¢ºãªè‰²åˆ†ã‘**: ezdxf colorç•ªå·ã«ã‚ˆã‚‹æ¨™æº–åŒ–
- **ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ†é›¢**: CROSSWALK_STRIPES, STOP_LINES, LANES
- **ä¸–ç•Œåº§æ¨™å¤‰æ›**: ç”»åƒåº§æ¨™ã‹ã‚‰å®Ÿä¸–ç•Œåº§æ¨™ã¸ã®æ­£ç¢ºå¤‰æ›

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³
```bash
git clone https://github.com/yourusername/road-marking-classifier.git
cd road-marking-classifier
```

### 2. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
pip install -r requirements.txt
```

### 3. å‹•ä½œç¢ºèª
```bash
python main.py --help
```

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•
```bash
python main.py input.pcd output.dxf
```

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æŒ‡å®š
```bash
python main.py input.pcd output.dxf --config config.json
```

### è©³ç´°å‡ºåŠ›ãƒ¢ãƒ¼ãƒ‰
```bash
python main.py input.pcd output.dxf --verbose
```

### å¤§å®¹é‡ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆå‡¦ç†ï¼ˆ300GBå¯¾å¿œï¼‰
```bash
# ãƒãƒƒãƒå‡¦ç†ãƒ¢ãƒ¼ãƒ‰
python main.py --batch /path/to/input/dir /path/to/output/dir

# ãƒãƒ£ãƒ³ã‚¯ã‚µã‚¤ã‚ºæŒ‡å®šï¼ˆMBå˜ä½ï¼‰
python main.py --batch /path/to/input/dir /path/to/output/dir --chunk-size 200
```

## ã‚µãƒãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼

### å…¥åŠ›å½¢å¼
- `.pcd` - Point Cloud Data (æ¨å¥¨)
- `.ply` - Polygon File Format

### å‡ºåŠ›å½¢å¼
- `.dxf` - Drawing Exchange Format (è‰²åˆ†ã‘ãƒ¬ã‚¤ãƒ¤ãƒ¼ä»˜ã)

## è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

`config.json`ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã¾ã™ï¼š

```json
{
  "ransac": {
    "distance_threshold": 0.1,
    "num_iterations": 1000
  },
  "hsv": {
    "s_range": [0, 30],
    "v_range": [180, 255]
  },
  "classification": {
    "crosswalk_min_aspect_ratio": 1.5,
    "stop_line_angle_tolerance": 15.0
  }
}
```

## å‡ºåŠ›ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹æˆ

| ãƒ¬ã‚¤ãƒ¤ãƒ¼å | è‰² | å†…å®¹ | ç”¨é€” |
|-----------|---|------|------|
| CROSSWALK_STRIPES | ãƒã‚¼ãƒ³ã‚¿(6) | æ¨ªæ–­æ­©é“ | æ­©è¡Œè€…æ¨ªæ–­ã‚¨ãƒªã‚¢ |
| STOP_LINES | é»„è‰²(2) | åœæ­¢ç·š | è»Šä¸¡åœæ­¢ä½ç½® |
| LANES | ç·‘è‰²(3) | è»Šç·š/æ­©é“ç·š | è»Šç·šå¢ƒç•Œãƒ»æ­©é“å¢ƒç•Œ |
| CURBS | èµ¤è‰²(1) | ç¸çŸ³ | è·¯é¢é«˜ä½å·®å¢ƒç•Œ |
| METADATA | ç™½è‰²(7) | ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ | å‡¦ç†æƒ…å ±ãƒ»çµ±è¨ˆ |

## å‡¦ç†ãƒ•ãƒ­ãƒ¼

```mermaid
graph TD
    A[PCDç‚¹ç¾¤å…¥åŠ›] --> B[RANSACé“è·¯é¢æ¤œå‡º]
    B --> C[é«˜ã•ãƒ™ãƒ¼ã‚¹åˆ†é¡]
    C --> D[HSVè‰²ç©ºé–“ç™½ç·šæ¤œå‡º]
    D --> E[å½¢æ…‹å­¦çš„ãƒã‚¤ã‚ºé™¤å»]
    E --> F[DBSCANã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°]
    F --> G[ãƒ™ã‚¯ãƒˆãƒ«åŒ–ãƒ»ç›´ç·šæŠ½å‡º]
    G --> H[å¹¾ä½•å­¦çš„å½¢çŠ¶åˆ†é¡]
    H --> I[ç©ºé–“é–¢ä¿‚è§£æ]
    I --> J[è‰²åˆ†ã‘DXFå‡ºåŠ›]
```

## ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶

- **Python**: 3.8ä»¥ä¸Š
- **ãƒ¡ãƒ¢ãƒª**: 4GBä»¥ä¸Šæ¨å¥¨
- **OS**: Windows, macOS, Linux

## ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯

| ç‚¹ç¾¤ã‚µã‚¤ã‚º | å‡¦ç†æ™‚é–“ | ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ | æ¤œå‡ºç²¾åº¦ | å‡¦ç†ãƒ¢ãƒ¼ãƒ‰ |
|-----------|---------|-------------|---------|-----------|
| ~100Kç‚¹ | 15ç§’ | 2GB | 95%+ | æ¨™æº– |
| ~500Kç‚¹ | 45ç§’ | 4GB | 93%+ | æ¨™æº– |
| ~1Mç‚¹ | 90ç§’ | 6GB | 91%+ | æ¨™æº– |
| ~10Mç‚¹+ | 10åˆ†+ | 8GB+ | 89%+ | å¤§å®¹é‡ãƒ¢ãƒ¼ãƒ‰ |
| 300GB+ | ãƒãƒƒãƒå‡¦ç† | ãƒãƒ£ãƒ³ã‚¯æ¯ | 88%+ | ãƒãƒƒãƒãƒ¢ãƒ¼ãƒ‰ |

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

**Q: ç™½ç·šãŒæ¤œå‡ºã•ã‚Œãªã„**
- A: `config.json`ã®HSVç¯„å›²ã‚’èª¿æ•´ã—ã¦ãã ã•ã„
- ã‚«ãƒ©ãƒ¼æƒ…å ±ãŒãªã„å ´åˆã¯RGBé–¾å€¤ã§å‡¦ç†ã•ã‚Œã¾ã™

**Q: åœæ­¢ç·šãŒæ¨ªæ–­æ­©é“ã¨ã—ã¦åˆ†é¡ã•ã‚Œã‚‹**  
- A: `stop_line_angle_tolerance`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’èª¿æ•´ã—ã¦ãã ã•ã„

**Q: ãƒ¡ãƒ¢ãƒªä¸è¶³ã‚¨ãƒ©ãƒ¼**
- A: å¤§ããªç‚¹ç¾¤ã¯äº‹å‰ã«é ˜åŸŸã‚’çµã£ã¦åˆ‡ã‚ŠæŠœã„ã¦ãã ã•ã„
- A: ãƒãƒƒãƒå‡¦ç†ãƒ¢ãƒ¼ãƒ‰ï¼ˆ--batchï¼‰ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„

**Q: 300GBã®å¤§å®¹é‡ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®å‡¦ç†æ–¹æ³•**
- A: ãƒãƒƒãƒå‡¦ç†ãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ç”¨:
  ```bash
  python main.py --batch input_dir output_dir --chunk-size 100
  ```
- A: äº‹å‰ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- A: æ®µéšçš„å‡¦ç†ï¼šåœ°åŸŸåˆ¥â†’é“è·¯åˆ¥â†’äº¤å·®ç‚¹åˆ¥

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

```bash
# å¤§å®¹é‡ãƒ•ã‚¡ã‚¤ãƒ«ã®å ´åˆ
python main.py large_file.pcd output.dxf --config high_performance_config.json

# 300GB ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®å ´åˆ
python main.py --batch /path/to/300gb/dataset /path/to/output --chunk-size 50

# ä¸¦åˆ—å‡¦ç†ï¼ˆè¤‡æ•°ãƒ—ãƒ­ã‚»ã‚¹ï¼‰
python batch_processor.py --workers 4 --batch /path/to/data /path/to/output
```

## é–‹ç™ºãƒ»è²¢çŒ®

### é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
git clone https://github.com/yourusername/road-marking-classifier.git
cd road-marking-classifier
pip install -r requirements.txt
pip install -r requirements-dev.txt  # é–‹ç™ºç”¨ä¾å­˜é–¢ä¿‚
```

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```bash
python -m pytest tests/
```

### ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
```bash
black main.py
flake8 main.py
```

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License - è©³ç´°ã¯[LICENSE](LICENSE)ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## æ›´æ–°å±¥æ­´

### v1.0.0 (2025-10-12)
- åˆå›ãƒªãƒªãƒ¼ã‚¹
- åŸºæœ¬çš„ãªé“è·¯æ¨™ç¤ºåˆ†é¡æ©Ÿèƒ½
- DXFè‰²åˆ†ã‘å‡ºåŠ›æ©Ÿèƒ½
- HSVè‰²ç©ºé–“ã«ã‚ˆã‚‹ç™½ç·šæ¤œå‡º
- RANSACé“è·¯é¢æ¤œå‡º

## é–¢é€£ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

- [Trust_Project02](https://github.com/yourorg/Trust_Project02) - å…ƒã¨ãªã£ãŸç ”ç©¶ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
- [LiDAR-Tools](https://github.com/yourorg/lidar-tools) - LiDARç‚¹ç¾¤å‡¦ç†ãƒ„ãƒ¼ãƒ«é›†

## å¼•ç”¨

ã“ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’ç ”ç©¶ã§ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å¼•ç”¨ã—ã¦ãã ã•ã„ï¼š

```
Road Marking Classifier: Automated Classification and Color-coded Output System for Road Markings from LiDAR Point Cloud Data. (2025)
```

## ã‚µãƒãƒ¼ãƒˆ

- ğŸ“§ **Issues**: [GitHub Issues](https://github.com/yourusername/road-marking-classifier/issues)
- ğŸ“– **Wiki**: [Project Wiki](https://github.com/yourusername/road-marking-classifier/wiki)
- ğŸ’¬ **Discussions**: [GitHub Discussions](https://github.com/yourusername/road-marking-classifier/discussions)

---

**Made with â¤ï¸ for transportation infrastructure digitalization**